<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Audit | Simplex</title>
    <link rel="stylesheet" href="/assets/restaurant_audit/css/audit-form.css">
</head>
<body>
    <div class="header">
        <div class="header-left">
             <button class="back-btn" onclick="goBack()">← Back</button>
            <div class="restaurant-info">
                <h1 id="restaurant-name">Loading...</h1>
            </div>
        </div>
        <button class="submit-btn" id="submit-btn" onclick="submitAudit()" disabled>Submit Audit</button>
    </div>

    <div class="container">
        <div id="loading" class="loading card">Loading Audit...</div>
        <div id="error" class="error card" style="display: none;"></div>
        
        <div id="audit-interface" style="display: none;">
            <div class="card location-check" id="location-check" style="margin-bottom: 1.5rem;">
                 <div class="location-status">
                    <div class="status-icon loading" id="location-icon">⏳</div>
                    <span id="location-text">Checking your location...</span>
                </div>
            </div>
            
            <div class="card dashboard">
                 <div class="progress-card">
                    <h3>Completion</h3>
                    <div class="progress-circle-container">
                        <svg class="progress-circle" width="120" height="120" viewBox="0 0 120 120"><circle class="progress-circle-bg" cx="60" cy="60" r="54"></circle><circle class="progress-circle-fg" id="completion-circle" cx="60" cy="60" r="54" pathLength="100" style="stroke-dasharray: 100; stroke-dashoffset: 100;"></circle></svg>
                        <div class="progress-text" id="completion-text">0%</div>
                    </div>
                </div>
                <div class="progress-card">
                    <h3>Audit Score</h3>
                    <div class="progress-circle-container">
                        <svg class="progress-circle" width="120" height="120" viewBox="0 0 120 120"><circle class="progress-circle-bg" cx="60" cy="60" r="54"></circle><circle class="progress-circle-fg" id="score-circle" cx="60" cy="60" r="54" pathLength="100" style="stroke-dasharray: 100; stroke-dashoffset: 100;"></circle></svg>
                        <div class="progress-text" id="score-text">0</div>
                    </div>
                </div>
            </div>
            
            <div class="main-layout">
                <div class="audit-sections card">
                    <h2>Audit Sections</h2>
                    <div class="category-grid" id="category-grid"></div>
                </div>
                <div class="overall-comment card">
                     <h2>Overall Comments</h2>
                     <textarea id="overall-comment" class="text-input" placeholder="Add any overall comments..." rows="4"></textarea>
                </div>
            </div>
        </div>
    </div>

    <div class="chat-modal" id="chat-modal">
        <div class="chat-container">
            <div class="chat-header">
                <h3 id="chat-title">Category Audit</h3>
                <button class="close-chat" id="close-chat">&times;</button>
            </div>
            <div class="chat-messages" id="chat-messages"></div>
            <div class="chat-input" id="chat-input">
                <div class="answer-options" id="answer-options"></div>
            </div>
        </div>
    </div>
    
    <script src="/assets/restaurant_audit/js/audit-form.js"></script>
</body>
</html>